{"name":"Stitching Images","tagline":"NTU VFX Project 2","body":"## 台灣大學 數位視覺效果 Project 2 Stitching Images\r\n\r\n**R03631012** 黃揚文 **R03631014** 徐嘉君\r\n\r\n\r\n\r\n### 使用相機\r\n本專題使用的相機為Nikon D3200，鏡頭為kit鏡 (AF-S NIKKOR 18-55mm 1:3.5-5.6G)\r\n\r\n### 開發環境\r\n1. Visual Studio 2013 Pro\r\n2. Qt 5.4\r\n3. OpenCV 2.4.9\r\n\r\n### 實作方法\r\n#### SIFT特徵點\r\n本專題利用上課講義提到的SIFT演算法尋找每個影像的特徵點，並參考Lowe的論文逐步實現計算過程。數學方面的運算則是直接使用OpenCV提供的``cv::gemm`` 解方程式解。\r\n\r\n#### focal length估算\r\n因為從exif讀出的資訊為原始照片尺寸下的focal length，且單位為mm。之前在撰寫程式時曾經因為改變圖片大小而導致在像素下的focal length值一同改變，因此我們直接將focal length資訊利用OpenCV的focal length estimation，以數張SIFT特徵點去推出該大小下的focal length。\r\n\r\n#### 特徵點匹配\r\n本專題原本是想直接使用Flann裡面的kdtree來尋找兩個descriptor之間的關係。但是由於跟OpenCV中的Flann函式衝突，因此我們先將我們自己的descriptor格式轉成OpenCV的格式後，再將配對點算出。\r\n\r\n算出後的點，利用最小distance的兩倍作為閥值，將過度歪斜的匹配點予以刪除，得到最後的良好配對點。\r\n\r\n#### Image Warping\r\n\r\n#### Multiresolution spline blending\r\n本專題參考Multiresolution spline blending演算法來消除圖與圖之間連接時因色調不同而造成的違和感。首先將兩張耀接合的重疊區塊取出並製作這兩張圖的高斯金字塔，再利用高斯金字塔製作出拉普拉斯金字塔，拉普拉斯金字塔最小的為圖片的色彩資訊，而其他層為邊界的資訊，我們將色彩資訊做橫向的高斯加權，重疊中線以50%作為基準，如下圖所示。邊界的資訊則是直接以中線左右各取一半的資訊，最後再將拉普拉斯金字塔還原成合成影像並將兩張圖片重疊的區域替換掉。\r\n\r\n[Imgur](http://i.imgur.com/mkizo9y.png)\r\n\r\n#### 結果\r\n\r\n\r\n### 作者\r\n黃揚文 (@KKyang)\r\n徐嘉君 (@Chia-ChunHsu)\r\n\r\n### Support or Contact\r\n可以利用Github提供的issues功能提供我們意見，謝謝!\r\n\r\n### Reference\r\n1. 課程講義\r\n2. David G. Lowe, Distinctive Image Features from Scale-Invariant Keypoints. Computer Science Department of University of British Columbia. (2004)\r\n3. Peter J. BURT, Edward H. ADELSON, A Multiresolution Spline With Application to Image Mosaics. ACM Transactions on Grphics, Vol. 2. No. 4, 1983: 217-236","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}